(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{566:function(e,t,n){var content=n(580);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("8d38fdd6",content,!0,{sourceMap:!1})},568:function(e,t,n){var content=n(591);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("1c1c8fdc",content,!0,{sourceMap:!1})},579:function(e,t,n){"use strict";n(566)},580:function(e,t,n){var r=n(11)(!1);r.push([e.i,".comment .reply[data-v-d6b8e348]:hover{color:#b388ff!important;border-bottom:1px solid #b388ff;cursor:pointer}.comment[data-v-d6b8e348]{margin-top:20px}.comment-container[data-v-d6b8e348]{margin-top:10px}.comment-container .comment-item[data-v-d6b8e348]{margin-bottom:10px}.comment-container .comment-item>div[data-v-d6b8e348]{position:relative;display:flex;justify-content:space-between;align-items:flex-start;min-height:64px;background:#fff;padding:10px}.comment-container .comment-item>div .avatar[data-v-d6b8e348]{width:40px;height:40px;margin-right:10px}.comment-container .comment-item>div .comment-info[data-v-d6b8e348]{flex:1;display:flex;flex-direction:column;justify-content:center;align-content:center;margin-right:3rem}.comment-container .comment-item>div .comment-info>div[data-v-d6b8e348]{display:flex;flex-direction:column}.comment-container .comment-item>div .comment-info .name[data-v-d6b8e348]{font-weight:600;font-size:14px;color:#333}.comment-container .comment-item>div .comment-info .email[data-v-d6b8e348]{font-size:small;color:#666;margin-right:1rem}.comment-container .comment-item>div .comment-info .date[data-v-d6b8e348]{font-size:12px;color:#ccc}.comment-container .comment-item>div .comment-info .comment[data-v-d6b8e348]{font-size:14px;color:#666;margin:5px 0;background:#f1f1f1;padding:10px;word-break:break-all}.comment-container .comment-item>div .reply-btn[data-v-d6b8e348]{position:absolute;right:.8rem;bottom:1.5rem;display:inline-block}.comment-container .comment-item>div .reply-btn[data-v-d6b8e348]:hover{cursor:pointer;color:#b388ff}.comment-container .comment-item .reply-container[data-v-d6b8e348]{padding-left:60px;margin:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.comment-container .comment-item .reply-container .reply-item[data-v-d6b8e348]{width:100%;border-left:1px solid #b8b8b8;padding-left:10px;margin-bottom:10px}.comment-container .comment-item .reply-container .reply-item>div[data-v-d6b8e348]{display:flex;justify-content:space-between;align-items:flex-start;min-height:64px;background:#fff;position:relative}.comment-container .comment-item .reply-container .reply-item>div .avatar[data-v-d6b8e348]{width:40px;height:40px;margin-right:10px}.comment-container .comment-item .reply-container .reply-item>div .reply-info[data-v-d6b8e348]{flex:1;display:flex;flex-direction:column;justify-content:center;align-content:center;margin-right:3rem}.comment-container .comment-item .reply-container .reply-item>div .reply-info>div[data-v-d6b8e348]{display:flex;flex-direction:column}.comment-container .comment-item .reply-container .reply-item>div .reply-info>div>span[data-v-d6b8e348]{display:flex;justify-content:flex-start;align-items:center}.comment-container .comment-item .reply-container .reply-item>div .reply-info .email[data-v-d6b8e348]{font-size:small;color:#666}.comment-container .comment-item .reply-container .reply-item>div .reply-info .name[data-v-d6b8e348]{font-weight:600;font-size:14px;color:#333}.comment-container .comment-item .reply-container .reply-item>div .reply-info .date[data-v-d6b8e348]{font-size:12px;color:#ccc}.comment-container .comment-item .reply-container .reply-item>div .reply-info .reply-content[data-v-d6b8e348]{font-size:14px;color:#666;margin:5px 0;background:#f1f1f1;padding:10px;word-break:break-all}.comment-container .comment-item .reply-container .reply-item>div .reply-btn[data-v-d6b8e348]{position:absolute;right:.3rem;bottom:1rem;display:inline-block}.comment-container .comment-item .reply-container .reply-item>div .reply-btn[data-v-d6b8e348]:hover{cursor:pointer;color:#b388ff}",""]),e.exports=r},590:function(e,t,n){"use strict";n(568)},591:function(e,t,n){var r=n(11)(!1);r.push([e.i,".blog[data-v-513374c9]{position:relative}.blog .like[data-v-513374c9]{position:absolute;top:2%;right:2%;cursor:pointer}.blog .content .text-justify[data-v-513374c9]{width:100%}.blog .content .text-justify[data-v-513374c9] img{height:auto;max-width:100%;-o-object-fit:contain;object-fit:contain}.blog .content[data-v-513374c9]{overflow:hidden}.container[data-v-513374c9]{width:60%;margin-top:20px}.container .theme-type[data-v-513374c9]{position:fixed;right:2%;top:10%;width:15%}.container .theme-type .v-card[data-v-513374c9]{padding:20px}.theme-type .article-theme[data-v-513374c9]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#b388ff}.theme-type .article-theme[data-v-513374c9]:hover{color:#5200e2}.theme-type .article-type[data-v-513374c9]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#4caf50}.theme-type .article-type[data-v-513374c9]:hover{color:#009606}.mx-2[data-v-513374c9]{position:fixed;left:5%;top:10%}@media screen and (max-width:980px){.container[data-v-513374c9]{width:100%}.container .theme-type[data-v-513374c9],.mx-2[data-v-513374c9]{display:none}}",""]),e.exports=r},627:function(e,t,n){"use strict";n.r(t);var r=n(20),pattern=(n(75),n(24),/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),c={data:function(){return{form:{message:""},reply:{message:""},name:"",email:"",listData:[],sheet:!1,comment_id:"",a_id:this.$route.query.id,r_name:"",i_email:"",r_email:"",count:"",snackbar:!1,snackbarText:"",timeout:2e3,limit:10}},mounted:function(){if(localStorage.getItem("tourist")){var e=localStorage.getItem("tourist");e=JSON.parse(e),this.name=e.name,this.email=e.email}},methods:{submit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.message){t.next=4;break}return e.snackbar=!0,e.snackbarText="评论不能为空",t.abrupt("return");case 4:if(!(e.form.message.length>240)){t.next=8;break}return e.snackbar=!0,e.snackbarText="评论长度不能超过240个字符",t.abrupt("return");case 8:if(e.email){t.next=12;break}return e.snackbar=!0,e.snackbarText="邮箱不能为空",t.abrupt("return");case 12:if(pattern.test(e.email)){t.next=16;break}return e.snackbar=!0,e.snackbarText="邮箱格式不正确",t.abrupt("return");case 16:if(!(e.email.length>64)){t.next=20;break}return e.snackbar=!0,e.snackbarText="邮箱长度不能超过64个字符",t.abrupt("return");case 20:if(e.name){t.next=24;break}return e.snackbar=!0,e.snackbarText="昵称不能为空",t.abrupt("return");case 24:if(!(e.name.length>20)){t.next=28;break}return e.snackbar=!0,e.snackbarText="昵称长度不能超过20个字符",t.abrupt("return");case 28:return t.prev=28,t.next=31,e.$axios.post("/comments",{name:e.name,email:e.email,comment:e.form.message,article_id:e.a_id});case 31:(n=t.sent).data.success?(localStorage.setItem("tourist",JSON.stringify({name:e.name,email:e.email})),e.form.message="",e.fetch(),e.snackbar=!0,e.snackbarText="评论成功，等待审核"):(e.snackbar=!0,e.snackbarText=n.data.message||"评论失败"),t.next=39;break;case 35:t.prev=35,t.t0=t.catch(28),e.snackbar=!0,e.snackbarText="评论失败";case 39:case"end":return t.stop()}}),t,null,[[28,35]])})))()},submitReply:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.reply.message||(t.snackbar=!0,t.snackbarText="回复不能为空"),!(t.reply.message.length>240)){n.next=5;break}return t.snackbar=!0,t.snackbarText="回复长度不能超过240个字符",n.abrupt("return");case 5:if(t.email){n.next=9;break}return t.snackbar=!0,t.snackbarText="邮箱不能为空",n.abrupt("return");case 9:if(pattern.test(t.email)){n.next=13;break}return t.snackbar=!0,t.snackbarText="邮箱格式不正确",n.abrupt("return");case 13:if(!(t.email.length>64)){n.next=17;break}return t.snackbar=!0,t.snackbarText="邮箱长度不能超过64个字符",n.abrupt("return");case 17:if(t.name||(t.snackbar=!0,t.snackbarText="昵称不能为空"),!(t.name.length>20)){n.next=22;break}return t.snackbar=!0,t.snackbarText="昵称长度不能超过20个字符",n.abrupt("return");case 22:return n.prev=22,n.next=25,t.$axios.post("/commentreply",{i_name:t.name,r_name:t.r_name,i_email:t.email,r_email:t.r_email,c_reply:t.reply.message,comment_id:t.comment_id,article_id:t.a_id});case 25:(r=n.sent).data.success?(localStorage.setItem("tourist",JSON.stringify({name:t.name,email:t.email})),t.reply.message="",t.sheet=!1,t.fetch(),t.comment_id=e,t.snackbar=!0,t.snackbarText="回复成功，等待审核"):(t.snackbar=!0,t.snackbarText=r.data.message||"回复失败"),n.next=33;break;case 29:n.prev=29,n.t0=n.catch(22),t.snackbar=!0,t.snackbarText="回复失败";case 33:case"end":return n.stop()}}),n,null,[[22,29]])})))()},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/comments/get?article_id=".concat(e.a_id,"&limit=").concat(e.limit));case 2:n=t.sent,e.count=n.data.total[0].total,e.listData=n.data.data;case 5:case"end":return t.stop()}}),t)})))()},fetchAdd:function(){this.limit+=10,this.fetch()},replyComment:function(e){this.sheet=!this.sheet,this.comment_id=e.id,this.r_name=e.name,this.r_email=e.email},replyCommentReply:function(e,t){this.sheet=!this.sheet,this.comment_id=e,this.r_name=t.i_name,this.r_email=t.i_email}},created:function(){this.fetch()},watch:{$route:function(e,t){this.a_id=e.query.id,this.fetch()}}},o=(n(579),n(74)),m=n(106),l=n.n(m),d=n(632),v=n(218),f=n(567),x=n(620),h=n(130),_=n(50),y=n(585),k=n(539),w=n(621),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment"},[n("v-container",{staticStyle:{backgroundcolor:"rgba(245, 245, 245, 0.7)",width:"100%"}},[n("h3",[e._v("发表评论")]),e._v(" "),n("div",[n("v-form",[n("v-textarea",{attrs:{label:"请输入评论内容（240字以内）",counter:240},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}),e._v(" "),n("v-text-field",{attrs:{counter:64,label:"邮箱",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:e.submit}},[e._v("发表")])],1)],1),e._v(" "),n("h3",{staticClass:"mt-12"},[e._v("评论区")]),e._v(" "),n("div",[n("div",{staticClass:"comment-container"},e._l(e.listData,(function(t){return n("div",{key:t.id,staticClass:"comment-item"},[n("div",[n("div",{staticClass:"avatar"},[n("v-img",{attrs:{src:"/user.png"}})],1),e._v(" "),n("div",{staticClass:"comment-info"},[n("div",[n("div",[n("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"email"},[e._v("("+e._s(t.email)+")")])]),e._v(" "),n("span",{staticClass:"date"},[e._v(e._s(t.createTime))])]),e._v(" "),n("p",{staticClass:"comment"},[e._v(e._s(t.comment))])]),e._v(" "),n("div",{staticClass:"reply-btn",on:{click:function(n){return e.replyComment(t)}}},[n("span",[e._v("回复")])])]),e._v(" "),t.reply.length?n("div",{staticClass:"reply-container"},e._l(t.reply,(function(r){return n("div",{key:r.id,staticClass:"reply-item"},[n("div",[n("div",{staticClass:"avatar"},[n("v-img",{attrs:{src:"/user.png"}})],1),e._v(" "),n("div",{staticClass:"reply-info"},[n("div",[n("div",[n("span",[n("span",{staticClass:"name"},[e._v(e._s(r.i_name))]),e._v(" "),n("span",{staticClass:"email"},[e._v("("+e._s(r.i_email)+")")])]),e._v(" "),n("span",{staticStyle:{color:"#666",fontSize:"12px",margin:"0px 5px"}},[e._v("回复")]),e._v(" "),n("span",[n("span",{staticClass:"name"},[e._v(e._s(r.r_name))]),e._v(" "),n("span",{staticClass:"email"},[e._v("("+e._s(r.r_email)+")")])])]),e._v(" "),n("span",{staticClass:"date"},[e._v(e._s(r.createTime))])]),e._v(" "),n("p",{staticClass:"reply-content"},[e._v(e._s(r.c_reply))])]),e._v(" "),n("div",{staticClass:"reply-btn",on:{click:function(n){return e.replyCommentReply(t.id,r)}}},[n("span",[e._v("回复")])])])])})),0):e._e()])})),0)]),e._v(" "),n("div",[n("v-bottom-sheet",{attrs:{inset:""},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[n("v-sheet",{staticClass:"text-center",attrs:{height:"24rem"}},[n("div",{staticClass:"px-2 mt-2"},[n("v-form",[n("v-textarea",{attrs:{label:"请输入回复内容（240字以内）",counter:240},model:{value:e.reply.message,callback:function(t){e.$set(e.reply,"message",t)},expression:"reply.message"}}),e._v(" "),n("v-text-field",{attrs:{counter:64,label:"邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:function(t){return e.submitReply(e.comment_id)}}},[e._v("提交")])],1)],1)])],1)],1)]),e._v(" "),e.count===e.listData.length?n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""}},[e._v("没有咯~")])],1):n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.fetchAdd()}}},[e._v("加载更多...")])],1),e._v(" "),n("v-snackbar",{attrs:{timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.snackbarText))])],1)}),[],!1,null,"d6b8e348",null),C=component.exports;l()(component,{VBottomSheet:d.a,VBtn:v.a,VContainer:f.a,VForm:x.a,VImg:h.a,VSheet:_.a,VSnackbar:y.a,VTextField:k.a,VTextarea:w.a});n(588);var T={data:function(){return{article:{createTime:""},sameThemeArticles:[],sameTypeArticles:[]}},directives:{highlight:n(156).a},methods:{getArticle:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var article;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/articles/".concat(e.$route.query.id));case 2:article=t.sent,e.article=article.data.data;case 4:case"end":return t.stop()}}),t)})))()},getSameThemeArticles:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/articles/get/sametheme?theme=".concat(e.article.theme,"&id=").concat(e.$route.query.id));case 2:n=t.sent,e.sameThemeArticles=n.data.data;case 4:case"end":return t.stop()}}),t)})))()},getSameTypeArticles:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/articles/get/sametype?type=".concat(e.article.type,"&id=").concat(e.$route.query.id));case 2:n=t.sent,e.sameTypeArticles=n.data.data;case 4:case"end":return t.stop()}}),t)})))()},backHome:function(){this.$router.push({path:"/"})},toArticleInfo:function(e){this.$router.push({path:"/blog",query:{id:e}})}},components:{Comment:C},watch:{$route:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.documentElement.scrollTop=0,e.next=3,n.getArticle();case 3:n.getSameThemeArticles(),n.getSameTypeArticles();case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getArticle();case 2:e.getSameThemeArticles(),e.getSameTypeArticles();case 4:case"end":return t.stop()}}),t)})))()}},S=(n(590),n(558)),A=n(622),j=n(153),R=Object(o.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blog"},[n("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"rgb(179, 136, 255)"},on:{click:e.backHome}},[n("v-icon",{attrs:{dark:""}},[e._v(" mdi-arrow-left ")])],1),e._v(" "),n("v-container",[n("div",{staticClass:"theme-type"},[n("v-card",[e.sameThemeArticles.length?n("div",[n("div",{staticClass:"my-4 subtitle-1"},[e._v("同主题文章")]),e._v(" "),e._l(e.sameThemeArticles,(function(t,r){return n("div",{key:r,staticClass:"article-theme",on:{click:function(n){return e.toArticleInfo(t.id)}}},[e._v("\n                        "+e._s(t.title)+"\n                    ")])}))],2):e._e(),e._v(" "),e.sameTypeArticles.length?n("div",[n("div",{staticClass:"my-4 subtitle-1"},[e._v("同分类文章")]),e._v(" "),e._l(e.sameTypeArticles,(function(t,r){return n("div",{key:r,staticClass:"article-type",on:{click:function(n){return e.toArticleInfo(t.id)}}},[e._v(e._s(t.title))])}))],2):e._e()])],1),e._v(" "),n("div",[n("div",{staticClass:"display-1 text-center"},[e._v(e._s(e.article.title))]),e._v(" "),n("div",{staticClass:"mt-12 d-flex justify-space-between",staticStyle:{fontSize:"14px"}},[n("span",[e._v("创建时间："),n("span",[e._v("\n                        "+e._s(e.article.createTime.split(" ")[0]))])]),e._v(" "),n("span",[e._v("阅读量："),n("span",[e._v(" "+e._s(e.article.clicks))])]),e._v(" "),n("span",[e._v("评论："),n("span",[e._v("\n                        "+e._s(e.article.comment_count?e.article.comment_count:0))])])]),e._v(" "),n("v-divider"),e._v(" "),n("div",{staticClass:"mb-12 d-flex justify-space-between",staticStyle:{fontSize:"14px"}},[n("span",[e._v("文章主题："),n("span",{staticStyle:{color:"#b388ff"}},[e._v("\n                        "+e._s(e.article.theme))])]),e._v(" "),n("span",[e._v("文章分类："),n("span",{staticStyle:{color:"#4caf50"}},[e._v(" "+e._s(e.article.type))])])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"text-justify",domProps:{innerHTML:e._s(e.article.content_html)}})])],1),e._v(" "),n("div",{staticClass:"mt-12"},[n("comment")],1)])],1)}),[],!1,null,"513374c9",null);t.default=R.exports;l()(R,{VBtn:v.a,VCard:S.a,VContainer:f.a,VDivider:A.a,VIcon:j.a})}}]);