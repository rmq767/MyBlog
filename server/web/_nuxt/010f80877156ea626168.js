(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{336:function(t,e,n){var content=n(343);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("9bfd162e",content,!0,{sourceMap:!1})},342:function(t,e,n){"use strict";var r=n(336);n.n(r).a},343:function(t,e,n){(e=n(10)(!1)).push([t.i,".comment .reply[data-v-40c4a34a]:hover{color:#b388ff!important;border-bottom:1px solid #b388ff;cursor:pointer}",""]),t.exports=e},345:function(t,e,n){var content=n(374);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("417f4248",content,!0,{sourceMap:!1})},347:function(t,e,n){"use strict";n(33),n(86);var r=n(26),o={props:["type","article_id"],data:function(){return{form:{},reply:{},listData:[],sheet:!1,commentReply:[],comment_id:"",a_id:this.$route.params.id,show_reply:0,r_name:"",count:""}},methods:{submit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("comments"!=t.type){e.next=5;break}return e.next=3,t.$axios.post("/comments",{name:t.form.name,comment:t.form.message,article_id:t.a_id});case 3:e.next=7;break;case 5:return e.next=7,t.$axios.post("/messages",{name:t.form.name,message:t.form.message});case 7:t.form={},t.fetch();case 9:case"end":return e.stop()}}),e)})))()},submitReply:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("comments"!=e.type){n.next=5;break}return n.next=3,e.$axios.post("/commentreply",{i_name:e.reply.name,r_name:e.r_name,c_reply:e.reply.message,comment_id:e.comment_id});case 3:n.next=7;break;case 5:return n.next=7,e.$axios.post("/messagereply",{i_name:e.reply.name,r_name:e.r_name,m_reply:e.reply.message,message_id:e.comment_id});case 7:e.sheet=!1,e.fetch(),e.comment_id=t,e.fetchReply(t);case 11:case"end":return n.stop()}}),n)})))()},fetch:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("comments"!=e.type){n.next=10;break}return n.next=3,e.$axios.get("/comments/get?article_id=".concat(e.a_id,"&limit=").concat(t||""));case 3:return r=n.sent,n.next=6,e.$axios.get("/comments?article_id=".concat(e.a_id));case 6:o=n.sent,e.count=o.data.length,n.next=17;break;case 10:return n.next=12,e.$axios.get("/messages/get?limit=".concat(t||""));case 12:return r=n.sent,n.next=15,e.$axios.get("/messages");case 15:c=n.sent,e.count=c.data.length;case 17:e.listData=r.data;case 18:case"end":return n.stop()}}),n)})))()},getPagination:function(t){this.listData=t},fetchReply:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("comments"!=e.type){n.next=6;break}return n.next=3,e.$axios.get("/commentreply?comment_id=".concat(t));case 3:r=n.sent,n.next=9;break;case 6:return n.next=8,e.$axios.get("/messagereply?message_id=".concat(t));case 8:r=n.sent;case 9:e.commentReply=r.data,e.show_reply=t;case 11:case"end":return n.stop()}}),n)})))()}},created:function(){this.fetch()},watch:{type:function(t){this.type=t,this.fetch()},$route:function(t,e){this.a_id=t.params.id,this.fetch()},show_reply:function(t){console.log(t)}}},c=(n(342),n(60)),l=n(87),m=n.n(l),v=n(396),d=n(186),f=n(348),h=n(387),_=n(129),x=n(112),y=n(130),k=n(80),w=n(132),C=n(69),$=n(36),O=n(316),j=n(388),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("v-container",{staticStyle:{backgroundColor:"rgba(245,245,245,0.7)"}},[n("h3",[t._v("留言区")]),t._v(" "),n("div",[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:t.submit}},[t._v("提交")])],1)],1),t._v(" "),n("h3",{staticClass:"mt-12"},[t._v("评论区")]),t._v(" "),n("div",t._l(t.listData,(function(e,i){return n("v-list",{key:e.id,staticClass:"py-0 my-3",attrs:{dense:"","two-line":""}},[[n("v-list-item",{attrs:{link:""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"/user.jpg"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-black",domProps:{innerHTML:t._s(e.name+"<span class='overline ml-5'>"+e.date.split("T")[0]+" "+e.date.split("T")[1].split(".")[0]+"</span>")}}),t._v(" "),n("v-list-item-subtitle",{domProps:{innerHTML:t._s("comments"==t.type?e.comment:e.message)}})],1),t._v(" "),n("div",{staticClass:"handleReply"},[n("span",{staticClass:"reply",on:{click:function(n){t.sheet=!t.sheet,t.comment_id=e.id,t.r_name=e.name}}},[t._v("回复")]),t._v(" "),n("div",{staticClass:"reply mt-4 overline",on:{click:function(n){return t.fetchReply(e.id)}}},[n("v-icon",{attrs:{size:"medium"}},[t._v("mdi-message-processing")]),t._v(" "),n("span",[t._v(t._s(e.reply_count?e.reply_count:0))])],1)])],1),t._v(" "),t.show_reply==e.id?n("div",{staticClass:"px-8"},[t._l(t.commentReply,(function(r){return[n("v-list-item",{key:r.r_id,attrs:{dense:"",link:""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"/user.jpg"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-black",domProps:{innerHTML:t._s(r.i_name+"<span class='caption mx-2'>回复</span> "+r.r_name+"<span class='overline ml-5'>"+r.date.split("T")[0]+" "+e.date.split("T")[1].split(".")[0]+"</span>")}}),t._v(" "),n("v-list-item-subtitle",{domProps:{innerHTML:t._s("comments"==t.type?r.c_reply:r.m_reply)}})],1),t._v(" "),n("div",{staticClass:"handleReply"},[n("span",{staticClass:"reply",on:{click:function(n){t.sheet=!t.sheet,t.comment_id=e.id,t.r_name=r.i_name}}},[t._v("回复")])])],1)]}))],2):t._e()]],2)})),1),t._v(" "),n("div",[n("v-bottom-sheet",{attrs:{inset:""},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[n("v-sheet",{staticClass:"text-center",attrs:{height:"18rem"}},[n("div",{staticClass:"px-2 mt-2"},[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.reply.message,callback:function(e){t.$set(t.reply,"message",e)},expression:"reply.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.reply.name,callback:function(e){t.$set(t.reply,"name",e)},expression:"reply.name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:function(e){return t.submitReply(t.comment_id)}}},[t._v("提交")])],1)],1)])],1)],1)]),t._v(" "),t.count===t.listData.length?n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""}},[t._v("没有咯~")])],1):n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""},on:{click:function(e){return t.fetch(10)}}},[t._v("加载更多...")])],1)],1)}),[],!1,null,"40c4a34a",null);e.a=component.exports;m()(component,{VBottomSheet:v.a,VBtn:d.a,VContainer:f.a,VForm:h.a,VIcon:_.a,VImg:x.a,VList:y.a,VListItem:k.a,VListItemAvatar:w.a,VListItemContent:C.a,VListItemSubtitle:C.b,VListItemTitle:C.c,VSheet:$.a,VTextField:O.a,VTextarea:j.a})},373:function(t,e,n){"use strict";var r=n(345);n.n(r).a},374:function(t,e,n){(e=n(10)(!1)).push([t.i,".blog .like{position:absolute;top:2%;right:2%;cursor:pointer}.blog .content img{height:auto;max-width:90%}.blog .content{overflow:hidden}",""]),t.exports=e},375:function(t,e,n){var content=n(376);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("7132a15d",content,!0,{sourceMap:!1})},376:function(t,e,n){(e=n(10)(!1)).push([t.i,".theme--light.v-divider{border-color:rgba(0,0,0,.12)}.theme--dark.v-divider{border-color:hsla(0,0%,100%,.12)}.v-divider{display:block;flex:1 1 0px;max-width:100%;height:0;max-height:0;border:solid;border-width:thin 0 0;transition:inherit}.v-divider--inset:not(.v-divider--vertical){max-width:calc(100% - 72px)}.v-application--is-ltr .v-divider--inset:not(.v-divider--vertical){margin-left:72px}.v-application--is-rtl .v-divider--inset:not(.v-divider--vertical){margin-right:72px}.v-divider--vertical{align-self:stretch;border:solid;border-width:0 thin 0 0;display:inline-flex;height:inherit;min-height:100%;max-height:100%;max-width:0;width:0;vertical-align:text-bottom}.v-divider--vertical.v-divider--inset{margin-top:8px;min-height:0;max-height:calc(100% - 16px)}",""]),t.exports=e},391:function(t,e,n){"use strict";n.r(e);n(86);var r=n(26),o={asyncData:function(t){var e=t.$axios,n=t.params;return Object(r.a)(regeneratorRuntime.mark((function t(){var article,pre,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/articles/".concat(n.id));case 2:return article=t.sent,t.next=5,e.$get("/articles/get/pre?id=".concat(n.id));case 5:return pre=t.sent,t.next=8,e.$get("/articles/get/next?id=".concat(n.id));case 8:return r=t.sent,t.abrupt("return",{article:article,pre:pre,next:r});case 10:case"end":return t.stop()}}),t)})))()},data:function(){return{notLike:!0}},methods:{isLike:function(){this.notLike=!this.notLike}},updated:function(){this.$route.params.id},components:{Comment:n(347).a}},c=(n(373),n(60)),l=n(87),m=n.n(l),v=n(186),d=n(348),f=(n(12),n(8),n(7),n(5),n(9),n(1));n(375);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(f.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x=n(15).a.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:_({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:_({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}}),y=n(129),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog"},[n("v-container",[n("div",[n("div",{staticClass:"display-1 text-center"},[t._v(t._s(t.article.title))]),t._v(" "),n("div",{staticStyle:{position:"relative"}},[n("div",{staticClass:"like d-md-flex d-none",on:{click:t.isLike}},[t.notLike?n("v-icon",{staticStyle:{"font-size":"3rem"}},[t._v("mdi-heart-outline")]):n("v-icon",{staticStyle:{"font-size":"3rem"},attrs:{color:"red"}},[t._v("mdi-heart")])],1)]),t._v(" "),n("div",{staticClass:"mt-12 d-flex justify-space-between"},[n("span",[t._v("发布时间 ："),n("span",[t._v(" "+t._s(t.article.date.split("T")[0]))])]),t._v(" "),n("span",[t._v("点击阅读量 ："),n("span",[t._v(" "+t._s(t.article.clicks))])]),t._v(" "),n("span",[t._v("评论数量 ："),n("span",[t._v("\n            "+t._s(t.article.comment_count?t.article.comment_count:0))])])]),t._v(" "),n("v-divider",{staticClass:"mb-8"}),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"text-justify",domProps:{innerHTML:t._s(t.article.content_html)}})]),t._v(" "),n("div",{staticStyle:{height:"10rem",position:"relative"}},[t.pre?n("div",{staticStyle:{position:"absolute",top:"10%",left:"3%"}},[n("v-btn",{attrs:{fab:"",to:"/blog/"+t.pre.id}},[n("v-icon",[t._v("mdi-skip-previous")])],1),t._v(" "),n("span",{staticClass:"ml-4"},[t._v(t._s(t.pre.title))])],1):t._e(),t._v(" "),t.next?n("div",{staticStyle:{position:"absolute",bottom:"10%",right:"3%"}},[n("span",{staticClass:"mr-4"},[t._v(t._s(t.next.title))]),t._v(" "),n("v-btn",{attrs:{fab:"",to:"/blog/"+t.next.id}},[n("v-icon",[t._v("mdi-skip-next")])],1)],1):t._e()])],1),t._v(" "),n("div",{staticClass:"mt-12"},[n("comment",{attrs:{type:"comments"}})],1)])],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:v.a,VContainer:d.a,VDivider:x,VIcon:y.a})}}]);