(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{540:function(t,e,n){var content=n(586);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("4a60c486",content,!0,{sourceMap:!1})},541:function(t,e,n){var content=n(596);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("619ec2d1",content,!0,{sourceMap:!1})},585:function(t,e,n){"use strict";var r=n(540);n.n(r).a},586:function(t,e,n){(e=n(10)(!1)).push([t.i,".comment .reply[data-v-71be05b8]:hover{color:#b388ff!important;border-bottom:1px solid #b388ff;cursor:pointer}.comment[data-v-71be05b8]{margin-top:20px}",""]),t.exports=e},595:function(t,e,n){"use strict";var r=n(541);n.n(r).a},596:function(t,e,n){(e=n(10)(!1)).push([t.i,".blog[data-v-072d4dd5]{position:relative}.blog .like[data-v-072d4dd5]{position:absolute;top:2%;right:2%;cursor:pointer}.blog .content img[data-v-072d4dd5]{height:auto;max-width:90%}.blog .content[data-v-072d4dd5]{overflow:hidden}.container[data-v-072d4dd5]{width:60%;margin-top:20px}.container .theme-type[data-v-072d4dd5]{position:fixed;right:2%;top:10%;width:15%}.container .theme-type .v-card[data-v-072d4dd5]{padding:20px}.theme-type .article-theme[data-v-072d4dd5]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#b388ff}.theme-type .article-theme[data-v-072d4dd5]:hover{color:#5200e2}.theme-type .article-type[data-v-072d4dd5]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#4caf50}.theme-type .article-type[data-v-072d4dd5]:hover{color:#009606}.mx-2[data-v-072d4dd5]{position:fixed;left:5%;top:10%}@media screen and (max-width:980px){.container[data-v-072d4dd5]{width:100%}.container .theme-type[data-v-072d4dd5],.mx-2[data-v-072d4dd5]{display:none}}",""]),t.exports=e},676:function(t,e,n){"use strict";n.r(e);n(69);var r=n(23),c=(n(33),{props:["type","article_id"],data:function(){return{form:{message:""},reply:{message:""},name:"",listData:[],sheet:!1,commentReply:[],comment_id:"",a_id:this.$route.params.id,show_reply:0,r_name:"",count:"",snackbar:!1,snackbarText:"",timeout:2e3}},mounted:function(){localStorage.getItem("tourist")&&(this.name=localStorage.getItem("tourist"))},methods:{submit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.message&&t.name){e.next=5;break}t.snackbar=!0,t.snackbarText="留言或者昵称不能为空",e.next=10;break;case 5:return e.next=7,t.$axios.post("/comments",{name:t.name,comment:t.form.message,article_id:t.a_id});case 7:localStorage.setItem("tourist",t.name),t.form.message="",t.fetch();case 10:case"end":return e.stop()}}),e)})))()},submitReply:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.reply.message&&e.name){n.next=5;break}e.snackbar=!0,e.snackbarText="留言或者昵称不能为空",n.next=13;break;case 5:return n.next=7,e.$axios.post("/commentreply",{i_name:e.name,r_name:e.r_name,c_reply:e.reply.message,comment_id:e.comment_id,article_id:e.a_id});case 7:localStorage.setItem("tourist",e.name),e.reply.message="",e.sheet=!1,e.fetch(),e.comment_id=t,e.fetchReply(t);case 13:case"end":return n.stop()}}),n)})))()},fetch:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.get("/comments/get?article_id=".concat(e.a_id,"&limit=").concat(t||""));case 2:return r=n.sent,n.next=5,e.$axios.get("/comments?article_id=".concat(e.a_id));case 5:c=n.sent,e.count=c.data.length,e.listData=r.data.data;case 8:case"end":return n.stop()}}),n)})))()},fetchReply:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.get("/commentreply?comment_id=".concat(t));case 2:r=n.sent,e.commentReply=r.data.data,e.show_reply=t;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){this.fetch()},watch:{$route:function(t,e){this.a_id=t.params.id,this.fetch()}}}),o=(n(585),n(59)),l=n(87),m=n.n(l),d=n(679),v=n(188),_=n(561),h=n(668),f=n(129),x=n(112),y=n(130),k=n(81),w=n(133),C=n(70),V=n(36),R=n(584),$=n(507),T=n(669),component=Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("v-container",{staticStyle:{backgroundcolor:"rgba(245, 245, 245, 0.7)",width:"100%"}},[n("h3",[t._v("留言区")]),t._v(" "),n("div",[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:t.submit}},[t._v("提交")])],1)],1),t._v(" "),n("h3",{staticClass:"mt-12"},[t._v("评论区")]),t._v(" "),n("div",t._l(t.listData,(function(e){return n("v-list",{key:e.id,staticClass:"py-0 my-3",attrs:{dense:"","two-line":""}},[[n("v-list-item",{attrs:{link:""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"/user.jpg"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-black",domProps:{innerHTML:t._s(e.name+"<span class='overline ml-5'>"+e.date+" </span>")}}),t._v(" "),n("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.comment)}})],1),t._v(" "),n("div",{staticClass:"handleReply"},[n("span",{staticClass:"reply",on:{click:function(n){t.sheet=!t.sheet,t.comment_id=e.id,t.r_name=e.name}}},[t._v("回复")]),t._v(" "),n("div",{staticClass:"reply mt-4 overline",on:{click:function(n){return t.fetchReply(e.id)}}},[n("v-icon",{attrs:{size:"medium"}},[t._v("mdi-message-processing")]),t._v(" "),n("span",[t._v(t._s(e.reply_count?e.reply_count:0))])],1)])],1),t._v(" "),t.show_reply==e.id?n("div",{staticClass:"px-8"},[t._l(t.commentReply,(function(r){return[n("v-list-item",{key:r.r_id,attrs:{dense:"",link:""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"/user.jpg"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-black",domProps:{innerHTML:t._s(r.i_name+"<span class='caption mx-2'>回复</span> "+r.r_name+"<span class='overline ml-5'>"+r.date+"</span>")}}),t._v(" "),n("v-list-item-subtitle",{domProps:{innerHTML:t._s(r.c_reply)}})],1),t._v(" "),n("div",{staticClass:"handleReply"},[n("span",{staticClass:"reply",on:{click:function(n){t.sheet=!t.sheet,t.comment_id=e.id,t.r_name=r.i_name}}},[t._v("回复")])])],1)]}))],2):t._e()]],2)})),1),t._v(" "),n("div",[n("v-bottom-sheet",{attrs:{inset:""},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[n("v-sheet",{staticClass:"text-center",attrs:{height:"18rem"}},[n("div",{staticClass:"px-2 mt-2"},[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.reply.message,callback:function(e){t.$set(t.reply,"message",e)},expression:"reply.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:function(e){return t.submitReply(t.comment_id)}}},[t._v("提交")])],1)],1)])],1)],1)]),t._v(" "),t.count===t.listData.length?n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""}},[t._v("没有咯~")])],1):n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""},on:{click:function(e){return t.fetch(10)}}},[t._v("加载更多...")])],1),t._v(" "),n("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.snackbarText))])],1)}),[],!1,null,"71be05b8",null),I=component.exports;m()(component,{VBottomSheet:d.a,VBtn:v.a,VContainer:_.a,VForm:h.a,VIcon:f.a,VImg:x.a,VList:y.a,VListItem:k.a,VListItemAvatar:w.a,VListItemContent:C.a,VListItemSubtitle:C.b,VListItemTitle:C.c,VSheet:V.a,VSnackbar:R.a,VTextField:$.a,VTextarea:T.a});n(593);var S={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,article,c,o,l,pre,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,e.next=3,n.$get("/articles/".concat(r.id));case 3:return article=e.sent,e.next=6,n.$get("/articles/get/sametheme?theme=".concat(article.theme));case 6:return c=e.sent,e.next=9,n.$get("/articles/get/sametype?type=".concat(article.type));case 9:return o=e.sent,e.next=12,n.$get("/articles/get/nextpre?id=".concat(r.id));case 12:return l=e.sent,article.data.id>l.data[0].id&&1===l.data.length?(pre=null,m=l.data[0]):article.data.id<l.data[0].id&&1===l.data.length?(pre=l.data[0],m=null):(pre=l.data[1],m=l.data[0]),e.abrupt("return",{article:article.data,pre:pre,next:m,sameThemeArticles:c.data,sameTypeArticles:o.data});case 15:case"end":return e.stop()}}),e)})))()},data:function(){return{}},directives:{highlight:n(132).a},methods:{backHome:function(){this.$router.push({path:"/"})},toArticleInfo:function(t){this.$router.push({path:"/blog/".concat(t)})}},updated:function(){this.$route.params.id},components:{Comment:I}},j=(n(595),n(530)),L=n(670),A=Object(o.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog"},[n("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"rgb(179, 136, 255)"},on:{click:t.backHome}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-arrow-left ")])],1),t._v(" "),n("v-container",[n("div",{staticClass:"theme-type"},[n("v-card",[n("div",{staticClass:"my-4 subtitle-1"},[t._v("同主题文章")]),t._v(" "),t._l(t.sameThemeArticles,(function(e){return n("div",{key:e.id,staticClass:"article-theme",on:{click:function(n){return t.toArticleInfo(e.id)}}},[t._v("\n                    "+t._s(e.title)+"\n                ")])})),t._v(" "),n("div",{staticClass:"my-4 subtitle-1"},[t._v("同分类文章")]),t._v(" "),t._l(t.sameTypeArticles,(function(e){return n("div",{key:e.id,staticClass:"article-type",on:{click:function(n){return t.toArticleInfo(e.id)}}},[t._v(t._s(e.title))])}))],2)],1),t._v(" "),n("div",[n("div",{staticClass:"display-1 text-center"},[t._v(t._s(t.article.title))]),t._v(" "),n("div",{staticClass:"mt-12 d-flex justify-space-between"},[n("span",[t._v("更新时间："),n("span",[t._v("\n                        "+t._s(t.article.date.split(" ")[0]))])]),t._v(" "),n("span",[t._v("阅读量："),n("span",[t._v(" "+t._s(t.article.clicks))])]),t._v(" "),n("span",[t._v("评论："),n("span",[t._v("\n                        "+t._s(t.article.comment_count?t.article.comment_count:0))])])]),t._v(" "),n("v-divider",{staticClass:"mb-8"}),t._v(" "),n("div",{staticClass:"content"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"text-justify",domProps:{innerHTML:t._s(t.article.content_html)}})]),t._v(" "),n("div",{staticStyle:{height:"10rem",position:"relative"}},[t.pre?n("div",{staticStyle:{position:"absolute",top:"10%",left:"3%"}},[n("v-btn",{attrs:{fab:"",to:"/blog/"+t.pre.id,small:""}},[n("v-icon",[t._v("mdi-skip-previous")])],1),t._v(" "),n("span",{staticClass:"ml-4"},[t._v(t._s(t.pre.title))])],1):t._e(),t._v(" "),t.next?n("div",{staticStyle:{position:"absolute",bottom:"10%",right:"3%"}},[n("span",{staticClass:"mr-4"},[t._v(t._s(t.next.title))]),t._v(" "),n("v-btn",{attrs:{fab:"",to:"/blog/"+t.next.id,small:""}},[n("v-icon",[t._v("mdi-skip-next")])],1)],1):t._e()])],1),t._v(" "),n("div",{staticClass:"mt-12"},[n("comment",{attrs:{type:"comments"}})],1)])],1)}),[],!1,null,"072d4dd5",null);e.default=A.exports;m()(A,{VBtn:v.a,VCard:j.a,VContainer:_.a,VDivider:L.a,VIcon:f.a})}}]);