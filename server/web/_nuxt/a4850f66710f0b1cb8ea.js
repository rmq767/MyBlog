(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{557:function(t,e,n){var content=n(644);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("06438e4e",content,!0,{sourceMap:!1})},558:function(t,e,n){var content=n(654);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("6bc79d66",content,!0,{sourceMap:!1})},643:function(t,e,n){"use strict";var r=n(557);n.n(r).a},644:function(t,e,n){(e=n(10)(!1)).push([t.i,".comment .reply[data-v-37d884ba]:hover{color:#b388ff!important;border-bottom:1px solid #b388ff;cursor:pointer}.comment[data-v-37d884ba]{margin-top:20px}.comment-container[data-v-37d884ba]{margin-top:10px}.comment-container .comment-item[data-v-37d884ba]{margin-bottom:10px}.comment-container .comment-item>div[data-v-37d884ba]{position:relative;display:flex;justify-content:space-between;align-items:flex-start;min-height:64px;background:#fff;padding:10px}.comment-container .comment-item>div .avatar[data-v-37d884ba]{width:40px;height:40px;margin-right:10px}.comment-container .comment-item>div .comment-info[data-v-37d884ba]{flex:1;display:flex;flex-direction:column;justify-content:center;align-content:center;margin-right:3rem}.comment-container .comment-item>div .comment-info .name[data-v-37d884ba]{font-weight:600;font-size:14px;color:#333;margin-right:1rem}.comment-container .comment-item>div .comment-info .date[data-v-37d884ba]{font-size:12px;color:#ccc}.comment-container .comment-item>div .comment-info .comment[data-v-37d884ba]{font-size:14px;color:#666;margin:5px 0;background:#f1f1f1;padding:10px;word-break:break-all}.comment-container .comment-item>div .reply-btn[data-v-37d884ba]{position:absolute;right:.8rem;bottom:1.5rem;display:inline-block}.comment-container .comment-item>div .reply-btn[data-v-37d884ba]:hover{cursor:pointer;color:#b388ff}.comment-container .comment-item .reply-container[data-v-37d884ba]{padding-left:60px;margin:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.comment-container .comment-item .reply-container .reply-item[data-v-37d884ba]{width:100%;border-left:1px solid #b8b8b8;padding-left:10px;margin-bottom:10px}.comment-container .comment-item .reply-container .reply-item>div[data-v-37d884ba]{display:flex;justify-content:space-between;align-items:flex-start;min-height:64px;background:#fff;position:relative}.comment-container .comment-item .reply-container .reply-item>div .avatar[data-v-37d884ba]{width:40px;height:40px;margin-right:10px}.comment-container .comment-item .reply-container .reply-item>div .reply-info[data-v-37d884ba]{flex:1;display:flex;flex-direction:column;justify-content:center;align-content:center;margin-right:3rem}.comment-container .comment-item .reply-container .reply-item>div .reply-info .name[data-v-37d884ba]{font-weight:600;font-size:14px;color:#333;margin-right:1rem}.comment-container .comment-item .reply-container .reply-item>div .reply-info .date[data-v-37d884ba]{font-size:12px;color:#ccc}.comment-container .comment-item .reply-container .reply-item>div .reply-info .reply-content[data-v-37d884ba]{font-size:14px;color:#666;margin:5px 0;background:#f1f1f1;padding:10px;word-break:break-all}.comment-container .comment-item .reply-container .reply-item>div .reply-btn[data-v-37d884ba]{position:absolute;right:.3rem;bottom:1rem;display:inline-block}.comment-container .comment-item .reply-container .reply-item>div .reply-btn[data-v-37d884ba]:hover{cursor:pointer;color:#b388ff}",""]),t.exports=e},653:function(t,e,n){"use strict";var r=n(558);n.n(r).a},654:function(t,e,n){(e=n(10)(!1)).push([t.i,".blog[data-v-3f9283f5]{position:relative}.blog .like[data-v-3f9283f5]{position:absolute;top:2%;right:2%;cursor:pointer}.blog .content img[data-v-3f9283f5]{height:auto;max-width:90%}.blog .content[data-v-3f9283f5]{overflow:hidden}.container[data-v-3f9283f5]{width:60%;margin-top:20px}.container .theme-type[data-v-3f9283f5]{position:fixed;right:2%;top:10%;width:15%}.container .theme-type .v-card[data-v-3f9283f5]{padding:20px}.theme-type .article-theme[data-v-3f9283f5]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#b388ff}.theme-type .article-theme[data-v-3f9283f5]:hover{color:#5200e2}.theme-type .article-type[data-v-3f9283f5]{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:1px solid #ccc;padding:5px 0;font-size:14px;cursor:pointer;color:#4caf50}.theme-type .article-type[data-v-3f9283f5]:hover{color:#009606}.mx-2[data-v-3f9283f5]{position:fixed;left:5%;top:10%}@media screen and (max-width:980px){.container[data-v-3f9283f5]{width:100%}.container .theme-type[data-v-3f9283f5],.mx-2[data-v-3f9283f5]{display:none}}",""]),t.exports=e},679:function(t,e,n){"use strict";n.r(e);n(69);var r=n(23),o=(n(33),{data:function(){return{form:{message:""},reply:{message:""},name:"",listData:[],sheet:!1,comment_id:"",a_id:this.$route.params.id,r_name:"",count:"",snackbar:!1,snackbarText:"",timeout:2e3,limit:0}},mounted:function(){localStorage.getItem("tourist")&&(this.name=localStorage.getItem("tourist"))},methods:{submit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.message&&t.name){e.next=5;break}t.snackbar=!0,t.snackbarText="留言或者昵称不能为空",e.next=10;break;case 5:return e.next=7,t.$axios.post("/comments",{name:t.name,comment:t.form.message,article_id:t.a_id});case 7:localStorage.setItem("tourist",t.name),t.form.message="",t.fetch();case 10:case"end":return e.stop()}}),e)})))()},submitReply:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.reply.message&&e.name){n.next=5;break}e.snackbar=!0,e.snackbarText="留言或者昵称不能为空",n.next=12;break;case 5:return n.next=7,e.$axios.post("/commentreply",{i_name:e.name,r_name:e.r_name,c_reply:e.reply.message,comment_id:e.comment_id,article_id:e.a_id});case 7:localStorage.setItem("tourist",e.name),e.reply.message="",e.sheet=!1,e.fetch(),e.comment_id=t;case 12:case"end":return n.stop()}}),n)})))()},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/comments/get?article_id=".concat(t.a_id,"&limit=").concat(t.limit));case 2:n=e.sent,t.limit+=10,t.count=n.data.total[0].total,t.listData=n.data.data;case 6:case"end":return e.stop()}}),e)})))()},replyComment:function(t){this.sheet=!this.sheet,this.comment_id=t.id,this.r_name=t.name},replyCommentReply:function(t,e){this.sheet=!this.sheet,this.comment_id=t,this.r_name=e.i_name}},created:function(){this.fetch()},watch:{$route:function(t,e){this.a_id=t.params.id,this.fetch()}}}),c=(n(643),n(59)),m=n(87),l=n.n(m),d=n(683),v=n(187),f=n(573),h=n(672),_=n(112),x=n(36),y=n(642),k=n(506),C=n(673),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("v-container",{staticStyle:{backgroundcolor:"rgba(245, 245, 245, 0.7)",width:"100%"}},[n("h3",[t._v("留言区")]),t._v(" "),n("div",[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:t.submit}},[t._v("提交")])],1)],1),t._v(" "),n("h3",{staticClass:"mt-12"},[t._v("评论区")]),t._v(" "),n("div",[n("div",{staticClass:"comment-container"},t._l(t.listData,(function(e){return n("div",{key:e.id,staticClass:"comment-item"},[n("div",[n("div",{staticClass:"avatar"},[n("v-img",{attrs:{src:"/user.png"}})],1),t._v(" "),n("div",{staticClass:"comment-info"},[n("div",[n("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(e.date))])]),t._v(" "),n("p",{staticClass:"comment"},[t._v(t._s(e.comment))])]),t._v(" "),n("div",{staticClass:"reply-btn",on:{click:function(n){return t.replyComment(e)}}},[n("span",[t._v("回复")])])]),t._v(" "),e.reply.length?n("div",{staticClass:"reply-container"},t._l(e.reply,(function(r){return n("div",{key:r.id,staticClass:"reply-item"},[n("div",[n("div",{staticClass:"avatar"},[n("v-img",{attrs:{src:"/user.png"}})],1),t._v(" "),n("div",{staticClass:"reply-info"},[n("div",[n("span",{staticClass:"name"},[t._v(t._s(r.i_name)),n("span",{staticStyle:{color:"#666",fontSize:"12px",margin:"0px 5px"}},[t._v("回复")]),t._v(t._s(r.r_name))]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(r.date))])]),t._v(" "),n("p",{staticClass:"reply-content"},[t._v(t._s(r.c_reply))])]),t._v(" "),n("div",{staticClass:"reply-btn",on:{click:function(n){return t.replyCommentReply(e.id,r)}}},[n("span",[t._v("回复")])])])])})),0):t._e()])})),0)]),t._v(" "),n("div",[n("v-bottom-sheet",{attrs:{inset:""},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[n("v-sheet",{staticClass:"text-center",attrs:{height:"18rem"}},[n("div",{staticClass:"px-2 mt-2"},[n("v-form",[n("v-textarea",{attrs:{label:"请输入留言（240字以内）",counter:240,required:""},model:{value:t.reply.message,callback:function(e){t.$set(t.reply,"message",e)},expression:"reply.message"}}),t._v(" "),n("v-text-field",{attrs:{counter:20,label:"昵称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{large:""},on:{click:function(e){return t.submitReply(t.comment_id)}}},[t._v("提交")])],1)],1)])],1)],1)]),t._v(" "),t.count===t.listData.length?n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""}},[t._v("没有咯~")])],1):n("div",{staticClass:"my-2 text-center"},[n("v-btn",{attrs:{text:"",small:""},on:{click:function(e){return t.fetch(t.limit)}}},[t._v("加载更多...")])],1),t._v(" "),n("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.snackbarText))])],1)}),[],!1,null,"37d884ba",null),w=component.exports;l()(component,{VBottomSheet:d.a,VBtn:v.a,VContainer:f.a,VForm:h.a,VImg:_.a,VSheet:x.a,VSnackbar:y.a,VTextField:k.a,VTextarea:C.a});n(651);var $={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,article,o,c,m,pre,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,e.next=3,n.$get("/articles/".concat(r.id));case 3:return article=e.sent,e.next=6,n.$get("/articles/get/sametheme?theme=".concat(article.data.theme));case 6:return o=e.sent,e.next=9,n.$get("/articles/get/sametype?type=".concat(article.data.type));case 9:return c=e.sent,e.next=12,n.$get("/articles/get/nextpre?id=".concat(r.id));case 12:return m=e.sent,article.data.id>m.data[0].id&&1===m.data.length?(pre=null,l=m.data[0]):article.data.id<m.data[0].id&&1===m.data.length?(pre=m.data[0],l=null):(pre=m.data[1],l=m.data[0]),e.abrupt("return",{article:article.data,pre:pre,next:l,sameThemeArticles:o.data,sameTypeArticles:c.data});case 15:case"end":return e.stop()}}),e)})))()},data:function(){return{}},directives:{highlight:n(132).a},methods:{backHome:function(){this.$router.push({path:"/"})},toArticleInfo:function(t){this.$router.push({path:"/blog/".concat(t)})}},updated:function(){this.$route.params.id},components:{Comment:w}},V=(n(653),n(529)),j=n(674),S=n(129),R=Object(c.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog"},[n("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"rgb(179, 136, 255)"},on:{click:t.backHome}},[n("v-icon",{attrs:{dark:""}},[t._v(" mdi-arrow-left ")])],1),t._v(" "),n("v-container",[n("div",{staticClass:"theme-type"},[n("v-card",[n("div",{staticClass:"my-4 subtitle-1"},[t._v("同主题文章")]),t._v(" "),t._l(t.sameThemeArticles,(function(e,r){return n("div",{key:r,staticClass:"article-theme",on:{click:function(n){return t.toArticleInfo(e.id)}}},[t._v("\n                    "+t._s(e.title)+"\n                ")])})),t._v(" "),n("div",{staticClass:"my-4 subtitle-1"},[t._v("同分类文章")]),t._v(" "),t._l(t.sameTypeArticles,(function(e,r){return n("div",{key:r+e.id,staticClass:"article-type",on:{click:function(n){return t.toArticleInfo(e.id)}}},[t._v(t._s(e.title))])}))],2)],1),t._v(" "),n("div",[n("div",{staticClass:"display-1 text-center"},[t._v(t._s(t.article.title))]),t._v(" "),n("div",{staticClass:"mt-12 d-flex justify-space-between"},[n("span",[t._v("更新时间："),n("span",[t._v("\n                        "+t._s(t.article.date.split(" ")[0]))])]),t._v(" "),n("span",[t._v("阅读量："),n("span",[t._v(" "+t._s(t.article.clicks))])]),t._v(" "),n("span",[t._v("评论："),n("span",[t._v("\n                        "+t._s(t.article.comment_count?t.article.comment_count:0))])])]),t._v(" "),n("v-divider",{staticClass:"mb-8"}),t._v(" "),n("div",{staticClass:"content"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"text-justify",domProps:{innerHTML:t._s(t.article.content_html)}})]),t._v(" "),n("div",{staticStyle:{height:"10rem",position:"relative"}},[t.pre?n("div",{staticStyle:{position:"absolute",top:"10%",left:"3%"}},[n("v-btn",{attrs:{fab:"",to:"/blog/"+t.pre.id,small:""}},[n("v-icon",[t._v("mdi-skip-previous")])],1),t._v(" "),n("span",{staticClass:"ml-4"},[t._v(t._s(t.pre.title))])],1):t._e(),t._v(" "),t.next?n("div",{staticStyle:{position:"absolute",bottom:"10%",right:"3%"}},[n("span",{staticClass:"mr-4"},[t._v(t._s(t.next.title))]),t._v(" "),n("v-btn",{attrs:{fab:"",to:"/blog/"+t.next.id,small:""}},[n("v-icon",[t._v("mdi-skip-next")])],1)],1):t._e()])],1),t._v(" "),n("div",{staticClass:"mt-12"},[n("comment")],1)])],1)}),[],!1,null,"3f9283f5",null);e.default=R.exports;l()(R,{VBtn:v.a,VCard:V.a,VContainer:f.a,VDivider:j.a,VIcon:S.a})}}]);